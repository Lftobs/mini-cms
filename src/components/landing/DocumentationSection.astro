<div
	id="docs"
	x-data="{
    activeCard: 0,
    animationKeys: [0, 0, 0],
    cards: [
      {
        title: 'GitHub Integration',
        description: 'Connect your repositories and manage content directly in GitHub with full version control.',
        image: 'img/git2.png'
      },
      {
        title: 'Rich Markdown Editor',
        description: 'Edit MDX and Markdown files with a powerful editor featuring live preview and syntax highlighting.',
        image: 'img/editor2.png'
      },
      {
        title: 'Project Organization',
        description: 'Organize your content into projects, manage permissions, and track all changes with activity logs.',
        image: 'img/proj.png'
      }
    ],

    init() {
      // Start the first card's animation
      this.animationKeys[0] = 1;

      // Auto-advance cards after animation completes
      const advanceCard = () => {
        setTimeout(() => {
          this.activeCard = (this.activeCard + 1) % this.cards.length;
          this.animationKeys[this.activeCard] = this.animationKeys[this.activeCard] + 1;
          advanceCard();
        }, 5000);
      };

      advanceCard();
    },
    handleCardClick(index) {
      this.activeCard = index;
      this.animationKeys[index] = this.animationKeys[index] + 1;
    }
  }"
	class="w-full border-b border-[rgba(55,50,47,0.12)] flex flex-col justify-center items-center relative"
>
	<!-- Soft gradient overlay -->
	<div class="absolute inset-0 gradient-overlay pointer-events-none"></div>
	<!-- Header Section -->
	<div
		class="self-stretch px-6 md:px-24 py-12 md:py-16 border-b border-[rgba(55,50,47,0.12)] flex justify-center items-center gap-6"
	>
		<div
			class="w-full max-w-[586px] px-6 py-5 overflow-hidden rounded-lg flex flex-col justify-start items-center gap-4 shadow-none"
		>
			<div
				class="px-[14px] py-[6px] glass-card overflow-hidden rounded-[90px] flex justify-start items-center gap-[8px]"
			>
				<div
					class="w-[14px] h-[14px] relative overflow-hidden flex items-center justify-center"
				>
					<div
						class="w-[10.50px] h-[10.50px] outline-[1.17px] outline-[#37322F] outline-offset-[-0.58px] rounded-full"
					>
					</div>
				</div>
				<div
					class="text-center flex justify-center flex-col text-[#37322F] text-xs font-medium leading-3 font-sans"
				>
					Platform Features
				</div>
			</div>
			<div
				class="self-stretch text-center flex justify-center flex-col text-[#49423D] text-3xl md:text-5xl font-semibold leading-tight md:leading-[60px] font-sans tracking-tight"
			>
				Everything you need to manage content in GitHub
			</div>
			<div
				class="self-stretch text-center text-[#605A57] text-base font-normal leading-7 font-sans"
			>
				Edit, organize, and collaborate on your MDX and Markdown files
				<br />
				with a minimal CMS that works seamlessly with your workflow.
			</div>
		</div>
	</div>

	<!-- Content Section -->
	<div
		class="self-stretch px-4 md:px-9 overflow-hidden flex justify-start items-center"
	>
		<div
			class="flex-1 py-8 md:py-11 flex flex-col md:flex-row justify-start items-center gap-6 md:gap-12"
		>
			<!-- Left Column - Feature Cards -->
			<div
				class="w-full md:w-auto md:max-w-[400px] flex flex-col justify-center items-center gap-4 order-2 md:order-1"
			>
				<template x-for="(card, index) in cards" :key="index">
					<div
						@click="handleCardClick(index)"
						:class="index === activeCard ? 'glass-card gradient-border' : 'bg-white/50 hover:bg-white/70 border border-[rgba(2,6,23,0.06)]'"
						class="w-full overflow-hidden flex flex-col justify-start items-start transition-all duration-300 cursor-pointer rounded-lg floating-card"
					>
						<div
							:class="index === activeCard ? 'opacity-100' : 'opacity-0'"
							class="w-full h-0.5 bg-[rgba(50,45,43,0.08)] overflow-hidden transition-opacity duration-300"
						>
							<div
								x-show="index === activeCard"
								x-init="
                  const restartAnimation = () => {
                    if (activeCard === index) {
                      $el.classList.remove('animate-[progressBar_5s_linear_forwards]');
                      void $el.offsetWidth; // Force reflow
                      $el.classList.add('animate-[progressBar_5s_linear_forwards]');
                    }
                  };
                  $watch('activeCard', restartAnimation);
                  $watch('animationKeys', () => {
                    if (activeCard === index) {
                      restartAnimation();
                    }
                  }, { deep: true });
                "
								class="h-0.5 bg-[#322D2B] animate-[progressBar_5s_linear_forwards] will-change-transform"
							>
							</div>
						</div>
						<div class="px-6 py-5 w-full flex flex-col gap-2">
							<div
								class="self-stretch flex justify-center flex-col text-[#49423D] text-sm font-semibold leading-6 font-sans"
							>
								<span x-text="card.title"></span>
							</div>
							<div
								class="self-stretch text-[#605A57] text-[13px] font-normal leading-[22px] font-sans whitespace-pre-line"
							>
								<span x-text="card.description"></span>
							</div>
						</div>
					</div>
				</template>
			</div>

			<!-- Right Column - Image -->
			<div
				class="w-full md:w-auto rounded-lg flex flex-col justify-center items-center gap-2 order-1 md:order-2 md:px-0 px-[00] bg-transparent"
			>
				<div
					class="w-full md:w-[500px] h-[200px] md:h-[400px] glass-card floating-card overflow-hidden rounded-xl flex flex-col justify-start items-start"
				>
					<img
						:src="cards[activeCard].image"
						:alt="cards[activeCard].title"
						class="w-full h-full object-fill transition-all duration-300"
					/>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	@keyframes progressBar {
		0% {
			transform: translateX(-100%);
		}
		100% {
			transform: translateX(0%);
		}
	}
</style>
