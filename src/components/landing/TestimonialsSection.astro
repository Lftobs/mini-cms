---
// TestimonialsSection.astro
---

<div
  id="testimonials"
  x-data="{
    activeTestimonial: 0,
    isTransitioning: false,
    testimonials: [
      {
        quote: 'mini-cms made managing our documentation so much easier. We can now edit MDX files directly without leaving our GitHub workflow.',
        name: 'Jamie Marshall',
        company: 'Developer, TechDocs',
        image: 'https://hebbkx1anhila5yf.public.blob.vercel-storage.com/ChatGPT%20Image%20Sep%2011%2C%202025%2C%2011_35_19%20AM-z4zSRLsbOQDp7MJS1t8EXmGNB6Al9Z.png'
      },
      {
        quote: 'The GitHub integration is seamless. Our team can collaborate on content while maintaining full version control and history.',
        name: 'Sarah Chen',
        company: 'Content Lead, DevBlog',
        image: 'https://hebbkx1anhila5yf.public.blob.vercel-storage.com/ChatGPT%20Image%20Sep%2011%2C%202025%2C%2010_54_18%20AM-nbiecp92QNdTudmCrHr97uekrIPzCP.png'
      },
      {
        quote: 'Finally, a CMS that understands developers. Managing our blog content through GitHub with mini-cms is exactly what we needed.',
        name: 'Marcus Rodriguez',
        company: 'Engineering Manager, CodeFlow',
        image: 'https://hebbkx1anhila5yf.public.blob.vercel-storage.com/ChatGPT%20Image%20Sep%2011%2C%202025%2C%2011_01_05%20AM-TBOe92trRxKn4G5So1m9D2h7LRH4PG.png'
      }
    ],
    init() {
      setInterval(() => {
        this.isTransitioning = true;
        setTimeout(() => {
          this.activeTestimonial = (this.activeTestimonial + 1) % this.testimonials.length;
          setTimeout(() => {
            this.isTransitioning = false;
          }, 100);
        }, 300);
      }, 12000);
    },
    handleNavigationClick(index) {
      this.isTransitioning = true;
      setTimeout(() => {
        this.activeTestimonial = index;
        setTimeout(() => {
          this.isTransitioning = false;
        }, 100);
      }, 300);
    }
  }"
  class="w-full border-b border-[rgba(55,50,47,0.12)] flex flex-col justify-center items-center relative"
>
  <!-- Soft gradient background -->
  <div class="absolute inset-0 gradient-overlay pointer-events-none"></div>
  <!-- Testimonial Content -->
  <div
    class="self-stretch px-2 overflow-hidden flex justify-start items-center bg-background border border-b border-l-0 border-r-0 border-t-0"
  >
    <div
      class="flex-1 py-16 md:py-17 flex flex-col md:flex-row justify-center items-end gap-6"
    >
      <div
        class="self-stretch px-3 md:px-12 justify-center items-start gap-4 flex flex-col md:flex-row"
      >
        <img
          class="w-48 h-50 md:w-48 md:h-50 rounded-lg object-cover transition-all duration-700 ease-in-out"
          :style="`opacity: ${isTransitioning ? 0.6 : 1}; transform: ${isTransitioning ? 'scale(0.95)' : 'scale(1)'}; transition: opacity 0.7s ease-in-out, transform 0.7s ease-in-out;`"
          :src="testimonials[activeTestimonial].image || '/placeholder.svg'"
          :alt="testimonials[activeTestimonial].name"
        />
        <div
          class="flex-1 px-6 py-6 glass-panel rounded-xl overflow-hidden flex flex-col justify-start items-start gap-6 shadow-none pb-0 pt-6"
        >
          <div
            class="self-stretch justify-start flex flex-col text-[#49423D] text-2xl md:text-[32px] font-medium leading-10 md:leading-[42px] font-sans h-[200px] md:h-[210px] overflow-hidden line-clamp-5 transition-all duration-700 ease-in-out tracking-tight"
            :style="`filter: ${isTransitioning ? 'blur(4px)' : 'blur(0px)'}; transition: filter 0.7s ease-in-out;`"
          >
            "<span x-text="testimonials[activeTestimonial].quote"></span>"
          </div>
          <div
            class="self-stretch flex flex-col justify-start items-start gap-1 transition-all duration-700 ease-in-out"
            :style="`filter: ${isTransitioning ? 'blur(4px)' : 'blur(0px)'}; transition: filter 0.7s ease-in-out;`"
          >
            <div
              class="self-stretch justify-center flex flex-col text-[rgba(73,66,61,0.90)] text-lg font-medium leading-[26px] font-sans"
            >
              <span x-text="testimonials[activeTestimonial].name"></span>
            </div>
            <div
              class="self-stretch justify-center flex flex-col text-[rgba(73,66,61,0.70)] text-lg font-medium leading-[26px] font-sans"
            >
              <span x-text="testimonials[activeTestimonial].company"></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Arrows -->
      <div class="pr-6 justify-start items-start gap-[14px] flex">
        <button
          @click="handleNavigationClick((activeTestimonial - 1 + testimonials.length) % testimonials.length)"
          class="w-9 h-9 glass-card overflow-hidden rounded-full justify-center items-center gap-2 flex hover:bg-white/80 transition-all floating-card"
        >
          <div class="w-6 h-6 relative overflow-hidden">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M15 18L9 12L15 6" stroke="#46413E"></path>
            </svg>
          </div>
        </button>
        <button
          @click="handleNavigationClick((activeTestimonial + 1) % testimonials.length)"
          class="w-9 h-9 glass-card overflow-hidden rounded-full justify-center items-center gap-2 flex hover:bg-white/80 transition-all floating-card"
        >
          <div class="w-6 h-6 relative overflow-hidden">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M9 18L15 12L9 6" stroke="#46413E"></path>
            </svg>
          </div>
        </button>
      </div>
    </div>
  </div>
</div>
